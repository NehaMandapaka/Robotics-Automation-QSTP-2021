import numpy as np
import matplotlib.pyplot as plt
import math

class Unicycle:
    def __init__(self, x: float, y: float, theta: float, dt: float):
        self.x = x
        self.y = y
        self.theta = theta
        self.dt = dt

        # Store the points of the trajectory to plot
        self.x_points = [self.x]
        self.y_points = [self.y]
        self.theta_points = [self.theta]
        #print(self.x_points)
        #print(self.y_points)

    def step(self, v: float, w: float, dt:float, n: int, theta:float):

        self.k = 1

        for self.k in range(n+1):

         t = dt*self.k
         self.theta_f = w*t + self.theta

         c = math.cos(self.theta_f)
         s = math.sin(self.theta_f)

         self.x_f = (v*c)*t 
         self.y_f = (v*s)*t
         

         self.x_points.append(self.x_f)
         self.y_points.append(self.y_f)
         self.theta_points.append(self.theta_f)
        print('set of x-coordinates : ', self.x_points)
        print('set of y-coordinates : ',self.y_points)
        print('set of theta values : ', self.theta_points)
        

        #return x, y, theta

    def plot(self, v: float, w: float):
        """Function that plots the intermeditate trajectory of the Robot"""
        plt.title(f"Unicycle Model: {v}, {w}")
        plt.xlabel("X-Coordinates")
        plt.ylabel("Y-Coordinates")
        plt.plot(self.x_points, self.y_points, color="red", alpha=0.75)
        plt.grid()

        # If you want to view the plot uncomment plt.show() and comment out plt.savefig()
        plt.show()
        # If you want to save the file, uncomment plt.savefig() and comment out plt.show()
        # plt.savefig(f"Unicycle_{v}_{w}.png")
   

if __name__ == "__main__":
    print("Unicycle Model Assignment")

x_i = int(input('Initial x coordinate : ')) 
y_i = int(input('Initial y coordinate : ')) 
theta = float(input('Initial theta value : '))
dt = float(input('Value of dt : '))
v = float(input('Value of v : '))
w = float(input('Value of w : '))
n = int(input('Timesteps : '))

unicycle_1 = Unicycle(x_i,y_i,theta,dt)
unicycle_1.step(v, w, dt, n,theta)
unicycle_1.plot(v,w)

